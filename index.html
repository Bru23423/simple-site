<link rel="icon" href="favicon_bricklogo.png" type="image/png">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Error code 404</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#ffd166;--muted:#94a3b8}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:linear-gradient(180deg,#071022 0%, #0a1321 60%); color:#e6eef8}
    .wrap{min-height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px}
    .card{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.03);padding:28px;border-radius:12px;backdrop-filter:blur(6px);box-shadow:0 6px 24px rgba(2,6,23,0.6);width:100%;max-width:980px}
    h1{font-size:clamp(36px,6vw,72px);margin:0 0 8px;letter-spacing:1px}
    p.lead{margin:0 0 18px;color:var(--muted)}

    /* Game area */
    .game-row{display:flex;gap:24px;align-items:center}
    #gameCanvas{background:#f7f7f7;border-radius:6px;display:block}
    .controls{display:flex;flex-direction:column;gap:8px}
    button.btn{background:var(--accent);border:none;padding:10px 14px;border-radius:8px;font-weight:600;cursor:pointer}
    button.ghost{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.04)}

    /* diagnostics modal */
    .modal-backdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,0.6)}
    .modal{background:#071022;padding:20px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);min-width:320px;max-width:640px}
    .modal h3{margin:0 0 8px}
    .diag-step{background:rgba(255,255,255,0.02);padding:10px;border-radius:6px;margin:8px 0}

    footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}

    @media(max-width:720px){.game-row{flex-direction:column-reverse}.controls{flex-direction:row}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Error code 404</h1>
      <p class="lead">The page you're looking for can't be found. But here's a little game to pass the time.</p>

      <div class="game-row">
        <canvas id="gameCanvas" width="800" height="150" aria-label="Dinosaur runner game"></canvas>

        <div class="controls">
          <button id="startBtn" class="btn">Start / Restart</button>
          <button id="diagBtn" class="ghost">Windows Diagnostics</button>
          <button id="muteBtn" class="ghost">Toggle Sound</button>
        </div>
      </div>

      <footer>Controls: Space or Up to jump • Tap on mobile. Score resets on crash.</footer>
    </div>
  </div>

  <!-- Modal for diagnostics -->
  <div id="modal" class="modal-backdrop" role="dialog" aria-hidden="true">
    <div class="modal" role="document">
      <h3>Windows Diagnostics</h3>
      <p class="lead" style="color:var(--muted)">This is a harmless simulated diagnostics panel — it won't change anything on your computer.</p>
      <div class="diag-step">1. Check disk: Quick scan for errors (simulated)</div>
      <div class="diag-step">2. Memory check: Running memory verifier (simulated)</div>
      <div class="diag-step">3. Network test: Ping test to common endpoints (simulated)</div>
      <div class="diag-step">4. Suggestions: Try restarting your system, update drivers (simulated)</div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button id="closeModal" class="ghost">Close</button>
      </div>
    </div>
  </div>

  <script>
    // Simple Chrome-dino-like runner. Designed to be readable and easy to tweak.
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    let running = false;
    let score = 0;
    let highScore = 0;
    let speed = 4;
    let gravity = 0.9;
    let soundOn = false;

    // Player
    const player = {x:40,y:0,w:44,h:44,vy:0,ground:110,jumpPower: -13,alive:true};

    // Obstacles
    const obstacles = [];
    let spawnTimer = 0;

    // Clouds / ground for parallax effect
    const clouds = [];
    for(let i=0;i<6;i++){clouds.push({x: i*160 + 200, y: 20 + (i%2)*10, w:40 + (i%3)*20})}

    function reset(){
      obstacles.length = 0; spawnTimer = 0; score = 0; speed = 4; player.y = player.ground; player.vy = 0; player.alive = true; running = false;
    }

    function start(){ reset(); running = true; loop(); }

    function loop(){
      update(); draw();
      if(running) requestAnimationFrame(loop);
    }

    function update(){
      if(!player.alive) return;
      // Player physics
      player.vy += gravity * 0.6;
      player.y += player.vy;
      if(player.y > player.ground) { player.y = player.ground; player.vy = 0; }

      // Spawn obstacles
      spawnTimer -= 1;
      if(spawnTimer <= 0){
        const gap = 60 + Math.random()*120 - score/100; // closer as score increases
        spawnTimer = Math.max(40, Math.floor(80 - score/50 + Math.random()*40));
        const h = 24 + Math.floor(Math.random()*36);
        obstacles.push({x: canvas.width + 20, w: 18 + Math.random()*24, h: h, y: player.ground + (44 - h)})
      }

      // Move obstacles
      for(let i=obstacles.length-1;i>=0;i--){
        const o = obstacles[i]; o.x -= speed;
        if(o.x + o.w < -50) obstacles.splice(i,1);
        // collision
        if(collide(player, o)) { player.alive = false; running = false; if(soundOn) beep(); highScore = Math.max(highScore, Math.floor(score)); }
      }

      // Move clouds
      clouds.forEach(c=>{ c.x -= speed*0.35; if(c.x < -100) c.x = canvas.width + Math.random()*200; });

      // Score
      score += 0.12 * (speed/4);
      // speed up slowly
      if(Math.floor(score) % 100 === 0) speed = 4 + Math.floor(score/100);
    }

    function collide(a,o){
      const ax1 = a.x, ay1 = a.y, ax2 = a.x + a.w, ay2 = a.y + a.h;
      const ox1 = o.x, oy1 = o.y, ox2 = o.x + o.w, oy2 = o.y + o.h;
      return ax1 < ox2 && ax2 > ox1 && ay1 < oy2 && ay2 > oy1;
    }

    function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // sky gradient
      const g = ctx.createLinearGradient(0,0,0,canvas.height);
      g.addColorStop(0, '#f7f7f7'); g.addColorStop(1,'#e9eef6');
      ctx.fillStyle = g; ctx.fillRect(0,0,canvas.width,canvas.height);

      // clouds
      ctx.fillStyle = '#e6eef8';
      clouds.forEach(c=>{ ctx.globalAlpha = 0.7; roundedRect(ctx, c.x, c.y, c.w, 12, 6); ctx.fill(); ctx.globalAlpha = 1; });

      // ground line
      ctx.fillStyle = '#d6dee8'; ctx.fillRect(0, player.ground + player.h, canvas.width, 6);

      // player (a simple dino)
      ctx.fillStyle = '#333'; roundedRect(ctx, player.x, player.y, player.w, player.h, 6); ctx.fill();
      // eye
      ctx.fillStyle = '#fff'; ctx.fillRect(player.x + 30, player.y + 12, 6, 6);

      // obstacles (cacti/blocks)
      ctx.fillStyle = '#2b2b2b'; obstacles.forEach(o=>{ roundedRect(ctx, o.x, o.y, o.w, o.h, 4); ctx.fill(); });

      // score
      ctx.fillStyle = '#222'; ctx.font = '14px system-ui'; ctx.textAlign = 'right'; ctx.fillText('Score: ' + Math.floor(score), canvas.width - 12, 18);
      ctx.textAlign = 'left'; ctx.fillStyle = '#222'; ctx.fillText('High: ' + Math.floor(highScore), 12, 18);

      if(!player.alive){
        ctx.fillStyle = 'rgba(0,0,0,0.35)'; ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = '#fff'; ctx.font = '22px system-ui'; ctx.textAlign = 'center'; ctx.fillText('Game Over — Press Start to try again', canvas.width/2, canvas.height/2);
      }
    }

    function roundedRect(ctx,x,y,w,h,r){ ctx.beginPath(); ctx.moveTo(x+r,y); ctx.arcTo(x+w,y,x+w,y+h,r); ctx.arcTo(x+w,y+h,x,y+h,r); ctx.arcTo(x,y+h,x,y,r); ctx.arcTo(x,y,x+w,y,r); ctx.closePath(); }

    // Controls
    function jump(){ if(player.y === player.ground){ player.vy = player.jumpPower; if(soundOn) beep(); } }
    document.addEventListener('keydown', e=>{ if(e.code === 'Space' || e.code === 'ArrowUp'){ e.preventDefault(); if(!running){ start(); } jump(); } if(e.key === 'r'){ reset(); draw(); } });
    canvas.addEventListener('touchstart', e=>{ e.preventDefault(); if(!running){ start(); } jump(); });

    // Buttons
    document.getElementById('startBtn').addEventListener('click', ()=>{ if(!running) start(); else { reset(); start(); }});
    document.getElementById('muteBtn').addEventListener('click', ()=>{ soundOn = !soundOn; document.getElementById('muteBtn').textContent = soundOn ? 'Sound: ON' : 'Toggle Sound'; });

    // Simple beep using WebAudio
    function beep(){ try{ const ctxA = new (window.AudioContext || window.webkitAudioContext)(); const o = ctxA.createOscillator(); const g = ctxA.createGain(); o.type = 'sine'; o.frequency.value = 440; g.gain.value = 0.02; o.connect(g); g.connect(ctxA.destination); o.start(); setTimeout(()=>{ o.stop(); ctxA.close(); }, 80); }catch(e){} }

    // Modal handlers
    const modal = document.getElementById('modal');
    document.getElementById('diagBtn').addEventListener('click', ()=>{ modal.style.display = 'flex'; modal.setAttribute('aria-hidden','false'); });
    document.getElementById('closeModal').addEventListener('click', ()=>{ modal.style.display = 'none'; modal.setAttribute('aria-hidden','true'); });
    modal.addEventListener('click', (e)=>{ if(e.target === modal){ modal.style.display = 'none'; modal.setAttribute('aria-hidden','true'); } });

    // initial draw
    player.y = player.ground; draw();

    // make canvas responsive
    function fit(){ const ratio = window.devicePixelRatio || 1; const w = Math.min(window.innerWidth - 80, 900); const h = 150; canvas.style.width = w + 'px'; canvas.style.height = h + 'px'; canvas.width = Math.round(w * ratio); canvas.height = Math.round(h * ratio); ctx.setTransform(ratio,0,0,ratio,0,0); draw(); }
    window.addEventListener('resize', fit); fit();
  </script>
</body>
</html>
