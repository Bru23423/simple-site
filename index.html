<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Art Upload Platform</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .post { border: 1px solid #ccc; padding: 10px; margin-bottom: 15px; }
    .buttons { display: flex; gap: 10px; margin-top: 10px; }
    .like-btn, .comment-btn, .delete-btn { cursor: pointer; }
    .confirm-delete { display: none; margin-top: 10px; }
    .green { background-color: green; color: white; padding: 5px; border: none; cursor: pointer; }
    .red { background-color: red; color: white; padding: 5px; border: none; cursor: pointer; }
  </style>
</head>
<body>

<h1>Upload Your Art</h1>
<form id="uploadForm">
  <input type="text" id="title" placeholder="Name your artwork" required><br><br>
  <input type="text" id="tags" placeholder="Tags (comma-separated)" required><br><br>
  <input type="file" id="file" accept="image/*,video/*" required><br><br>
  <button type="submit">Upload</button>
</form>

<h2>Search</h2>
<input type="text" id="searchInput" placeholder="Search by name or tag...">

<h2>Posts</h2>
<div id="postsContainer"></div>

<script>
  let posts = [];
  let userId = 'exampleUser123'; // Simulate a logged-in user

  document.getElementById('uploadForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const title = document.getElementById('title').value;
    const tags = document.getElementById('tags').value.split(',');
    const file = document.getElementById('file').files[0];

    if (!file) return alert("Please upload a file.");

    const postId = Date.now().toString();
    const url = URL.createObjectURL(file);

    posts.push({
      id: postId,
      title,
      tags,
      fileUrl: url,
      likes: 0,
      comments: [],
      owner: userId
    });

    renderPosts();
  });

  function renderPosts(filter = "") {
    const container = document.getElementById('postsContainer');
    container.innerHTML = "";

    posts.filter(p => {
      return p.title.includes(filter) || p.tags.some(tag => tag.includes(filter));
    }).forEach(post => {
      const div = document.createElement('div');
      div.className = 'post';
      div.innerHTML = `
        <strong>${post.title}</strong><br>
        Tags: ${post.tags.join(', ')}<br>
        ${post.fileUrl.endsWith('.mp4') ? 
          `<video width="300" controls src="${post.fileUrl}"></video>` : 
          `<img src="${post.fileUrl}" width="300">`
        }
        <div class="buttons">
          <button class="like-btn" onclick="likePost('${post.id}')">Like (${post.likes})</button>
          <button class="comment-btn" onclick="commentPost('${post.id}')">Comment</button>
          ${post.owner === userId ? `<button class="delete-btn" onclick="showDeleteConfirm('${post.id}')">Delete</button>` : ''}
        </div>
        <div class="confirm-delete" id="confirm-${post.id}">
          <p>Are you sure you want to delete?</p>
          <button class="green" onclick="deletePost('${post.id}')">Yes</button>
          <button class="red" onclick="hideDeleteConfirm('${post.id}')">No</button>
        </div>
      `;
      container.appendChild(div);
    });
  }

  function likePost(id) {
    const post = posts.find(p => p.id === id);
    if (!post) return;
    if (!post.likedBy) post.likedBy = new Set();
    if (post.likedBy.has(userId)) return alert("You've already liked this post.");

    post.likes++;
    post.likedBy.add(userId);
    renderPosts(document.getElementById('searchInput').value);
  }

  function commentPost(id) {
    const comment = prompt("Enter your comment:");
    if (!comment) return;
    const post = posts.find(p => p.id === id);
    post.comments.push({ user: userId, text: comment });
    alert("Comment added!");
  }

  function showDeleteConfirm(id) {
    document.getElementById(`confirm-${id}`).style.display = 'block';
  }

  function hideDeleteConfirm(id) {
    document.getElementById(`confirm-${id}`).style.display = 'none';
  }

  function deletePost(id) {
    posts = posts.filter(p => p.id !== id);
    renderPosts(document.getElementById('searchInput').value);
  }

  document.getElementById('searchInput').addEventListener('input', function() {
    renderPosts(this.value);
  });

  renderPosts();
</script>

</body>
</html>

