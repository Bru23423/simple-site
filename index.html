<link rel="icon" href="favicon_bricklogo.png" type="image/png">
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>BETA 0.1v (Made by @realfishy1 on Discord)</title>
  <style>
    :root{
      --bg:#0b1220;
      --panel:#0f1a2f;
      --panel2:#0c1528;
      --text:#e9f0ff;
      --muted:#9fb0d1;
      --accent:#6aa6ff;
      --good:#33d17a;
      --warn:#ffcc00;
      --bad:#ff4d4d;
      --bubbleUser:#1f3a6b;
      --bubbleBot:#152544;
      --border:rgba(255,255,255,.10);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(1200px 700px at 20% 0%, rgba(106,166,255,.18), transparent 60%),
                  radial-gradient(1000px 600px at 100% 30%, rgba(51,209,122,.12), transparent 55%),
                  var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
    }
    .app{
      width:min(980px, 100%);
      height:min(720px, 92vh);
      background: linear-gradient(180deg, rgba(255,255,255,.05), transparent 40%),
                  rgba(15,26,47,.88);
      border:1px solid var(--border);
      border-radius:18px;
      box-shadow: var(--shadow);
      overflow:hidden;
      display:grid;
      grid-template-columns: 280px 1fr;
    }
    @media (max-width: 900px){
      .app{grid-template-columns: 1fr; height: 94vh;}
      .sidebar{display:none;}
    }

    .sidebar{
      background: rgba(12,21,40,.75);
      border-right:1px solid var(--border);
      padding:16px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border:1px solid var(--border);
      border-radius:14px;
      background: rgba(255,255,255,.04);
    }
    .logo{
      width:38px;height:38px;border-radius:12px;
      background: linear-gradient(135deg, rgba(106,166,255,.95), rgba(51,209,122,.85));
      display:grid;place-items:center;
      color:#061022;
      font-weight:900;
      letter-spacing:.5px;
      box-shadow: 0 8px 18px rgba(106,166,255,.18);
    }
    .brand h1{
      font-size:14px; margin:0; line-height:1.1;
    }
    .brand p{margin:0;color:var(--muted);font-size:12px}

    .card{
      border:1px solid var(--border);
      border-radius:14px;
      padding:12px;
      background: rgba(255,255,255,.03);
    }
    .row{
      display:flex; justify-content:space-between; align-items:center; gap:10px;
    }
    .badge{
      font-size:11px;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid var(--border);
      color:var(--muted);
      background: rgba(255,255,255,.03);
      white-space:nowrap;
    }
    .statusDot{
      width:10px;height:10px;border-radius:50%;
      background: var(--good);
      box-shadow: 0 0 0 4px rgba(51,209,122,.12);
    }

    .hint{
      color:var(--muted);
      font-size:12px;
      line-height:1.35;
      margin-top:8px;
    }
    .btns{
      display:flex; gap:8px; flex-wrap:wrap; margin-top:10px;
    }
    button{
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      color:var(--text);
      padding:9px 10px;
      border-radius:12px;
      cursor:pointer;
      font-weight:600;
      font-size:12px;
      transition:.15s transform, .15s background;
      user-select:none;
    }
    button:hover{background: rgba(255,255,255,.07)}
    button:active{transform: translateY(1px)}
    .danger{border-color: rgba(255,77,77,.35); background: rgba(255,77,77,.07)}
    .accent{border-color: rgba(106,166,255,.45); background: rgba(106,166,255,.10)}

    .main{
      display:flex;
      flex-direction:column;
      height:100%;
    }
    .topbar{
      padding:14px 16px;
      border-bottom:1px solid var(--border);
      background: rgba(255,255,255,.02);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .topbar .title{
      display:flex;flex-direction:column;gap:2px;
    }
    .topbar .title b{font-size:14px}
    .topbar .title span{font-size:12px;color:var(--muted)}
    .topbar .right{
      display:flex;align-items:center;gap:10px;
    }

    .chat{
      flex:1;
      overflow:auto;
      padding:16px;
      background: linear-gradient(180deg, rgba(255,255,255,.02), transparent 30%);
    }
    .msg{
      display:flex;
      gap:10px;
      margin: 10px 0;
      align-items:flex-end;
    }
    .msg.user{justify-content:flex-end}
    .avatar{
      width:34px;height:34px;border-radius:12px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      display:grid;place-items:center;
      color:var(--muted);
      font-weight:800;
      flex:0 0 auto;
    }
    .bubble{
      max-width:min(540px, 92%);
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background: var(--bubbleBot);
      box-shadow: 0 10px 20px rgba(0,0,0,.15);
      white-space:pre-wrap;
      line-height:1.35;
      font-size:14px;
    }
    .msg.user .bubble{background: var(--bubbleUser)}
    .meta{
      font-size:11px;
      color:var(--muted);
      margin-top:6px;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .typing{
      display:inline-flex;
      gap:4px;
      align-items:center;
    }
    .dot{
      width:6px;height:6px;border-radius:50%;
      background: rgba(233,240,255,.65);
      animation: bounce 1.1s infinite;
    }
    .dot:nth-child(2){animation-delay:.15s}
    .dot:nth-child(3){animation-delay:.3s}
    @keyframes bounce{
      0%, 70%, 100%{transform: translateY(0); opacity:.55}
      35%{transform: translateY(-4px); opacity:1}
    }

    .composer{
      border-top:1px solid var(--border);
      padding:12px;
      background: rgba(12,21,40,.65);
      display:flex;
      gap:10px;
      align-items:flex-end;
    }
    textarea{
      flex:1;
      resize:none;
      min-height:48px;
      max-height:140px;
      border-radius:14px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      color:var(--text);
      padding:12px 12px;
      font-size:14px;
      outline:none;
      line-height:1.35;
    }
    .send{
      padding:12px 14px;
      border-radius:14px;
      font-size:13px;
      border-color: rgba(106,166,255,.55);
      background: rgba(106,166,255,.14);
    }
    .small{
      font-size:11px;
      color:var(--muted);
      padding:0 12px 12px;
    }
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">AI</div>
        <div>
          <h1>Offline Chatbot</h1>
          <p>No key ‚Ä¢ No internet</p>
        </div>
      </div>

      <div class="card">
        <div class="row">
          <div style="display:flex;align-items:center;gap:8px">
            <span class="statusDot" id="statusDot"></span>
            <b style="font-size:13px">Status</b>
          </div>
          <span class="badge" id="statusText">Ready</span>
        </div>
        <div class="hint">
          This bot runs 100% in your browser. It‚Äôs a ‚Äúfake AI‚Äù (rules + patterns), but it feels like chat.
        </div>
        <div class="btns">
          <button class="accent" id="btnDemo">Demo prompt</button>
          <button id="btnExplain">What can you do?</button>
          <button class="danger" id="btnClear">Clear chat</button>
        </div>
      </div>

      <div class="card">
        <b style="font-size:13px">Quick prompts</b>
        <div class="btns" id="quickPrompts"></div>
        <div class="hint">Tip: Edit the ‚Äúbrain‚Äù in the JS to add more answers.</div>
      </div>

      <div class="card">
        <b style="font-size:13px">Saved</b>
        <div class="hint">
          Chat auto-saves to your browser (localStorage). Nothing is uploaded.
        </div>
      </div>
    </aside>

    <main class="main">
      <div class="topbar">
        <div class="title">
          <b id="botName">Nova (Offline AI)</b>
          <span id="botSub">Type a message ‚Äî press Enter to send</span>
        </div>
        <div class="right">
          <span class="badge" id="modeBadge">Mode: Offline</span>
          <button id="btnExport">Export chat</button>
        </div>
      </div>

      <div class="chat" id="chat"></div>

      <div class="composer">
        <textarea id="input" placeholder="Message Nova..." rows="1"></textarea>
        <button class="send" id="send">Send</button>
      </div>
      <div class="small">
        This is a local demo bot (no real AI model). Want it to feel more ‚Äúreal‚Äù? Add more rules, or connect an API later.
      </div>
    </main>
  </div>

<script>
/* =========================================================
   OFFLINE CHATBOT ‚Äî NO KEY, NO API
   - Pattern matching + small memory + random replies
   - Saves chat in localStorage
   ========================================================= */

const chatEl = document.getElementById("chat");
const inputEl = document.getElementById("input");
const sendBtn = document.getElementById("send");
const statusDot = document.getElementById("statusDot");
const statusText = document.getElementById("statusText");

const btnClear = document.getElementById("btnClear");
const btnDemo = document.getElementById("btnDemo");
const btnExplain = document.getElementById("btnExplain");
const btnExport = document.getElementById("btnExport");

const quickPromptsEl = document.getElementById("quickPrompts");

// --- quick prompts
const quickPrompts = [
  "Give me study tips for a test",
  "Make a 5th grade story ending",
  "Explain black holes simply",
  "Help me name a game project",
  "Write a short Discord announcement",
  "Give me a cool website idea",
];
quickPrompts.forEach(t => {
  const b = document.createElement("button");
  b.textContent = t;
  b.onclick = () => { inputEl.value = t; inputEl.focus(); };
  quickPromptsEl.appendChild(b);
});

// --- tiny memory (local, not smart)
const memory = {
  name: localStorage.getItem("bot_user_name") || "",
  likes: JSON.parse(localStorage.getItem("bot_user_likes") || "[]"),
};

// --- storage for chat
const STORAGE_KEY = "offline_bot_chat_v1";

// --- helpers
function nowTime(){
  const d = new Date();
  return d.toLocaleTimeString([], {hour:"2-digit", minute:"2-digit"});
}
function scrollToBottom(){
  chatEl.scrollTop = chatEl.scrollHeight;
}
function setStatus(text, state="ok"){
  statusText.textContent = text;
  if(state==="ok"){
    statusDot.style.background = "var(--good)";
    statusDot.style.boxShadow = "0 0 0 4px rgba(51,209,122,.12)";
  }else if(state==="warn"){
    statusDot.style.background = "var(--warn)";
    statusDot.style.boxShadow = "0 0 0 4px rgba(255,204,0,.12)";
  }else{
    statusDot.style.background = "var(--bad)";
    statusDot.style.boxShadow = "0 0 0 4px rgba(255,77,77,.12)";
  }
}
function escapeHTML(s){
  return s.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");
}

// --- chat render
function addMessage(role, text, opts={}){
  const msg = document.createElement("div");
  msg.className = "msg " + (role === "user" ? "user" : "bot");

  const avatar = document.createElement("div");
  avatar.className = "avatar";
  avatar.textContent = role === "user" ? "U" : "N";

  const bubble = document.createElement("div");
  bubble.className = "bubble";
  bubble.innerHTML = escapeHTML(text);

  const wrap = document.createElement("div");
  wrap.style.display = "flex";
  wrap.style.flexDirection = "column";
  wrap.style.gap = "6px";

  const meta = document.createElement("div");
  meta.className = "meta";
  meta.textContent = (opts.meta || (role==="user" ? "You" : "Nova")) + " ‚Ä¢ " + (opts.time || nowTime());

  wrap.appendChild(bubble);
  wrap.appendChild(meta);

  if(role === "user"){
    msg.appendChild(wrap);
    msg.appendChild(avatar);
  }else{
    msg.appendChild(avatar);
    msg.appendChild(wrap);
  }

  chatEl.appendChild(msg);
  scrollToBottom();

  saveChat();
  return {msg, bubble};
}

// --- typing indicator
let typingMsg = null;
function showTyping(){
  if(typingMsg) return;
  typingMsg = document.createElement("div");
  typingMsg.className = "msg bot";

  const avatar = document.createElement("div");
  avatar.className = "avatar";
  avatar.textContent = "N";

  const bubble = document.createElement("div");
  bubble.className = "bubble";
  bubble.innerHTML = `<span class="typing">
    <span class="dot"></span><span class="dot"></span><span class="dot"></span>
  </span>`;

  typingMsg.appendChild(avatar);
  typingMsg.appendChild(bubble);
  chatEl.appendChild(typingMsg);
  scrollToBottom();
}
function hideTyping(){
  if(!typingMsg) return;
  typingMsg.remove();
  typingMsg = null;
}

// --- ‚Äúbrain‚Äù: rules + fallback generator
const rules = [
  { test: /^(hi|hello|hey|yo)\b/i, reply: () => pick([
    "Hey! üëã What are we making today?",
    "Hi! Want help with a website, game, or homework?",
    "Yo! Ask me anything (offline version)."
  ])},

  { test: /\bwhat can you do\b|\bhelp\b|\bcommands\b/i, reply: () =>
`I can:
‚Ä¢ Answer simple questions (offline rules)
‚Ä¢ Write short stories, messages, announcements
‚Ä¢ Help brainstorm ideas (games/websites)
‚Ä¢ Give study tips and explanations
‚Ä¢ Make lists, plans, and outlines

Try: ‚ÄúGive me a cool website idea‚Äù or ‚ÄúWrite a short story ending.‚Äù`
  },

  { test: /\bmy name is\s+([a-z0-9 _-]{2,20})/i, reply: (m) => {
      const name = m[1].trim();
      memory.name = name;
      localStorage.setItem("bot_user_name", name);
      return `Nice to meet you, ${name}!`;
  }},

  { test: /\bcall me\s+([a-z0-9 _-]{2,20})/i, reply: (m) => {
      const name = m[1].trim();
      memory.name = name;
      localStorage.setItem("bot_user_name", name);
      return `Got it ‚Äî I‚Äôll call you ${name}.`;
  }},

  { test: /\b(study|test|homework|school)\b/i, reply: () => {
      const n = memory.name ? `, ${memory.name}` : "";
      return `Here are quick study tips${n}:
1) Do 25 minutes work + 5 minute break (repeat 3‚Äì4 times)
2) Quiz yourself (flashcards or practice questions)
3) Explain it like you‚Äôre teaching someone
4) Fix the topics you miss most
Want this for a specific subject (math/reading/science)?`;
  }},

  { test: /\b(make|write)\b.*\bstory\b/i, reply: () =>
`Okay! Pick one:
A) Funny
B) Scary (not too intense)
C) Adventure
D) School life

Reply with A/B/C/D and 2 characters‚Äô names.`
  },

  { test: /\bwebsite\b|\bhtml\b|\bcss\b|\bjavascript\b/i, reply: () =>
`I can help with websites! Tell me what you want:
‚Ä¢ Style (dark, neon, clean, etc.)
‚Ä¢ Pages (home, about, rules, etc.)
‚Ä¢ Features (buttons, login UI, gallery, settings)

If you say ‚Äúfull code‚Äù, I can generate a complete single-file page.`
  },

  { test: /\bgame\b|\broblox\b|\bproject\b/i, reply: () =>
`Game idea time:
1) ‚ÄúAnomaly School‚Äù: spot what changed, survive rounds
2) ‚ÄúPolice Dispatch‚Äù: manage calls fast, earn upgrades
3) ‚ÄúPortal Runner‚Äù: speedrun maps with abilities

What genre do you want (horror / roleplay / racing / tycoon / obby)?`
  },

  { test: /\bmath\b/i, reply: () =>
`Tell me the exact math problem (copy/paste it), and I‚Äôll walk through it step-by-step.`
  },

  { test: /\b(black hole|space|planet|star)\b/i, reply: () =>
`Space version: A black hole is a place where gravity is so strong that even light can‚Äôt escape.
It usually forms when a giant star collapses.
Want the ‚Äúkid version‚Äù or the ‚Äúscience class version‚Äù?`
  },

  { test: /\bdiscord\b.*\bannouncement\b|\bannounce\b/i, reply: () =>
`Here‚Äôs a clean Discord announcement template:

**Update!**
Hey everyone ‚Äî quick update: [what changed].
üìå Details: [short details]
‚è∞ When: [time/date]
‚úÖ What to do: [action]
Thanks!`

  },
];

// fallback: ‚Äúfeels like AI‚Äù
function fallbackAnswer(userText){
  const n = memory.name ? memory.name : "there";
  const t = userText.trim();

  // super simple ‚Äúintent‚Äù guessing
  if(t.endsWith("?")){
    return pick([
      `Good question, ${n}. I‚Äôm offline, but here‚Äôs my best take:\n\n` + guessExplain(t),
      `I can‚Äôt browse the internet, but I can explain the idea:\n\n` + guessExplain(t),
      `Here‚Äôs a simple answer:\n\n` + guessExplain(t),
    ]);
  }

  if(t.length < 6){
    return pick([`Say a bit more and I‚Äôll help.`, `What do you mean by ‚Äú${t}‚Äù?`]);
  }

  return pick([
    `Got it. Want a short version or detailed version?`,
    `Okay ‚Äî what‚Äôs the main goal (what should the final result look like)?`,
    `I can help with that. What style do you want (simple / cool / realistic)?`
  ]);
}

function guessExplain(q){
  // dumb but useful: rephrase + give steps
  return `‚Ä¢ Rephrase: ${q}\n‚Ä¢ Steps:\n  1) Tell me the context\n  2) What you already tried\n  3) What you want as the final output\n\nThen I‚Äôll answer with a clear plan.`;
}

function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

// --- generate bot reply
async function respond(userText){
  setStatus("Thinking‚Ä¶", "warn");
  showTyping();

  // small delay
  await sleep(500 + Math.random()*500);

  // match rules
  let reply = null;
  for(const r of rules){
    const m = userText.match(r.test);
    if(m){
      reply = (typeof r.reply === "function") ? r.reply(m) : r.reply;
      break;
    }
  }
  if(!reply) reply = fallbackAnswer(userText);

  hideTyping();
  setStatus("Ready", "ok");

  // typing effect
  await typeOut(reply);
}

function sleep(ms){ return new Promise(res => setTimeout(res, ms)); }

async function typeOut(text){
  const { bubble } = addMessage("bot", "");
  const safe = escapeHTML(text);
  let i = 0;
  const speed = 12; // lower = faster
  while(i < safe.length){
    bubble.innerHTML = safe.slice(0, i);
    i += 2; // chunk
    await sleep(speed);
    scrollToBottom();
  }
  bubble.innerHTML = safe;
}

// --- chat save/load
function saveChat(){
  const items = [];
  chatEl.querySelectorAll(".msg").forEach(m => {
    const isUser = m.classList.contains("user");
    const bubble = m.querySelector(".bubble")?.textContent ?? "";
    const meta = m.querySelector(".meta")?.textContent ?? "";
    items.push({ role: isUser ? "user" : "bot", text: bubble, meta });
  });
  localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
}
function loadChat(){
  const raw = localStorage.getItem(STORAGE_KEY);
  if(!raw) return false;
  try{
    const items = JSON.parse(raw);
    if(!Array.isArray(items) || items.length===0) return false;
    items.forEach(it => addMessage(it.role, it.text, {meta: it.role==="user" ? "You" : "Nova"}));
    return true;
  }catch(e){ return false; }
}
function clearChat(){
  chatEl.innerHTML = "";
  localStorage.removeItem(STORAGE_KEY);
}

// --- send flow
async function send(){
  const text = inputEl.value.trim();
  if(!text) return;

  addMessage("user", text, {meta:"You"});
  inputEl.value = "";
  inputEl.style.height = "auto";
  await respond(text);
}

// --- export chat
function exportChat(){
  const raw = localStorage.getItem(STORAGE_KEY) || "[]";
  const items = JSON.parse(raw);
  const lines = items.map(it => {
    const who = it.role === "user" ? "You" : "Nova";
    return `[${who}] ${it.text}`;
  }).join("\n\n");

  const blob = new Blob([lines], {type:"text/plain"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "chat_export.txt";
  a.click();
  URL.revokeObjectURL(a.href);
}

// --- events
sendBtn.addEventListener("click", send);
inputEl.addEventListener("keydown", (e) => {
  if(e.key === "Enter" && !e.shiftKey){
    e.preventDefault();
    send();
  }
});
inputEl.addEventListener("input", () => {
  inputEl.style.height = "auto";
  inputEl.style.height = Math.min(inputEl.scrollHeight, 140) + "px";
});

btnClear.addEventListener("click", () => {
  clearChat();
  bootMessage(true);
});
btnDemo.addEventListener("click", () => {
  inputEl.value = "My name is Alex. Give me 5 study tips for a test.";
  inputEl.focus();
});
btnExplain.addEventListener("click", () => {
  addMessage("user", "What can you do?", {meta:"You"});
  respond("What can you do?");
});
btnExport.addEventListener("click", exportChat);

// --- start
function bootMessage(force=false){
  if(!force && loadChat()){
    setStatus("Loaded", "ok");
    return;
  }
  addMessage("bot",
`Hey! I‚Äôm Nova ‚Äî an offline chatbot.
‚úÖ No key needed. No internet needed.
Try: ‚ÄúWhat can you do?‚Äù or ‚ÄúMake a story about a school mystery.‚Äù`,
{meta:"Nova"});
  setStatus("Ready", "ok");
}
bootMessage();
</script>
</body>
</html>
